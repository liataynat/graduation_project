COMPILER = g++
CFLAGS = --std=c++0x -DNDEBUG -O3 -static -ggdb
PRE_CFLAGS = ${CFLAGS} -c
TARGET = GenSC

SRC_DIR = src
INCLUDE_DIR = include

BASIS = basis
BASIS_TARGET = ${SRC_DIR}/${BASIS}.o
BASIS_CPP_FILE = ${SRC_DIR}/${BASIS}.cpp
BASIS_H_FILE = ${INCLUDE_DIR}/${BASIS}.h
BASIS_SOURCE_FILES = ${BASIS_H_FILE} ${BASIS_CPP_FILE}

BREAK_TIES = break_ties
BREAK_TIES_TARGET = ${SRC_DIR}/${BREAK_TIES}.o
BREAK_TIES_CPP_FILE = ${SRC_DIR}/${BREAK_TIES}.cpp
BREAK_TIES_H_FILE = ${INCLUDE_DIR}/${BREAK_TIES}.h
BREAK_TIES_SOURCE_FILES = ${BREAK_TIES_H_FILE} ${BREAK_TIES_CPP_FILE}

CC_AND_TABU = cc_and_tabu
CC_AND_TABU_TARGET = ${SRC_DIR}/${CC_AND_TABU}.o
CC_AND_TABU_CPP_FILE = ${SRC_DIR}/${CC_AND_TABU}.cpp
CC_AND_TABU_H_FILE = ${INCLUDE_DIR}/${CC_AND_TABU}.h
CC_AND_TABU_SOURCE_FILES = ${CC_AND_TABU_H_FILE} ${CC_AND_TABU_CPP_FILE}

# INFO = info
# INFO_TARGET = ${SRC_DIR}/${INFO}.o
# INFO_CPP_FILE = ${SRC_DIR}/${INFO}.cpp
# INFO_H_FILE = ${INCLUDE_DIR}/${INFO}.h
# INFO_SOURCE_FILES = ${INFO_H_FILE} ${INFO_CPP_FILE}

INIT = init
INIT_TARGET = ${SRC_DIR}/${INIT}.o
INIT_CPP_FILE = ${SRC_DIR}/${INIT}.cpp
INIT_H_FILE = ${INCLUDE_DIR}/${INIT}.h
INIT_SOURCE_FILES = ${INIT_H_FILE} ${INIT_CPP_FILE}

# MERSENNE = mersenne_rng
# MERSENNE_TARGET = ${SRC_DIR}/${MERSENNE}.o
# MERSENNE_CPP_FILE = ${SRC_DIR}/${MERSENNE}.cpp
# MERSENNE_H_FILE = ${INCLUDE_DIR}/${MERSENNE}.h
# MERSENNE_SOURCE_FILES = ${MERSENNE_H_FILE} ${MERSENNE_CPP_FILE}

# PARSE_ARGUMENTS = parse_arguments
# PARSE_ARGUMENTS_TARGET = ${SRC_DIR}/${PARSE_ARGUMENTS}.o
# PARSE_ARGUMENTS_CPP_FILE = ${SRC_DIR}/${PARSE_ARGUMENTS}.cpp
# PARSE_ARGUMENTS_H_FILE = ${INCLUDE_DIR}/${PARSE_ARGUMENTS}.h
# PARSE_ARGUMENTS_SOURCE_FILES = ${PARSE_ARGUMENTS_H_FILE} ${PARSE_ARGUMENTS_CPP_FILE}

PREPROCESS = preprocess
PREPROCESS_TARGET = ${SRC_DIR}/${PREPROCESS}.o
PREPROCESS_CPP_FILE = ${SRC_DIR}/${PREPROCESS}.cpp
PREPROCESS_H_FILE = ${INCLUDE_DIR}/${PREPROCESS}.h
PREPROCESS_SOURCE_FILES = ${PREPROCESS_H_FILE} ${PREPROCESS_CPP_FILE}

RECONSTRUCT = reconstruct
RECONSTRUCT_TARGET = ${SRC_DIR}/${RECONSTRUCT}.o
RECONSTRUCT_CPP_FILE = ${SRC_DIR}/${RECONSTRUCT}.cpp
RECONSTRUCT_H_FILE = ${INCLUDE_DIR}/${RECONSTRUCT}.h
RECONSTRUCT_SOURCE_FILES = ${RECONSTRUCT_H_FILE} ${RECONSTRUCT_CPP_FILE}

SCORING_FUNCTION = scoring_function
SCORING_FUNCTION_TARGET = ${SRC_DIR}/${SCORING_FUNCTION}.o
SCORING_FUNCTION_CPP_FILE = ${SRC_DIR}/${SCORING_FUNCTION}.cpp
SCORING_FUNCTION_H_FILE = ${INCLUDE_DIR}/${SCORING_FUNCTION}.h
SCORING_FUNCTION_SOURCE_FILES = ${SCORING_FUNCTION_H_FILE} ${SCORING_FUNCTION_CPP_FILE}

SET_STATES = set_states
SET_STATES_TARGET = ${SRC_DIR}/${SET_STATES}.o
SET_STATES_CPP_FILE = ${SRC_DIR}/${SET_STATES}.cpp
SET_STATES_H_FILE = ${INCLUDE_DIR}/${SET_STATES}.h
SET_STATES_SOURCE_FILES = ${SET_STATES_H_FILE} ${SET_STATES_CPP_FILE}

# SETUP = setup
# SETUP_TARGET = ${SRC_DIR}/${SETUP}.o
# SETUP_CPP_FILE = ${SRC_DIR}/${SETUP}.cpp
# SETUP_H_FILE = ${INCLUDE_DIR}/${SETUP}.h
# SETUP_SOURCE_FILES = ${SETUP_H_FILE} ${SETUP_CPP_FILE}

SOLUTION_INIT = solution_init
SOLUTION_INIT_TARGET = ${SRC_DIR}/${SOLUTION_INIT}.o
SOLUTION_INIT_CPP_FILE = ${SRC_DIR}/${SOLUTION_INIT}.cpp
SOLUTION_INIT_H_FILE = ${INCLUDE_DIR}/${SOLUTION_INIT}.h
SOLUTION_INIT_SOURCE_FILES = ${SOLUTION_INIT_H_FILE} ${SOLUTION_INIT_CPP_FILE}

SUBSET_REMOVAL = subset_removal
SUBSET_REMOVAL_TARGET = ${SRC_DIR}/${SUBSET_REMOVAL}.o
SUBSET_REMOVAL_CPP_FILE = ${SRC_DIR}/${SUBSET_REMOVAL}.cpp
SUBSET_REMOVAL_H_FILE = ${INCLUDE_DIR}/${SUBSET_REMOVAL}.h
SUBSET_REMOVAL_SOURCE_FILES = ${SUBSET_REMOVAL_H_FILE} ${SUBSET_REMOVAL_CPP_FILE}

SUBSET_ADDITION = subset_addition
SUBSET_ADDITION_TARGET = ${SRC_DIR}/${SUBSET_ADDITION}.o
SUBSET_ADDITION_CPP_FILE = ${SRC_DIR}/${SUBSET_ADDITION}.cpp
SUBSET_ADDITION_H_FILE = ${INCLUDE_DIR}/${SUBSET_ADDITION}.h
SUBSET_ADDITION_SOURCE_FILES = ${SUBSET_ADDITION_H_FILE} ${SUBSET_ADDITION_CPP_FILE}

UPDATE_VARIABLES = update_variables
UPDATE_VARIABLES_TARGET = ${SRC_DIR}/${UPDATE_VARIABLES}.o
UPDATE_VARIABLES_CPP_FILE = ${SRC_DIR}/${UPDATE_VARIABLES}.cpp
UPDATE_VARIABLES_H_FILE = ${INCLUDE_DIR}/${UPDATE_VARIABLES}.h
UPDATE_VARIABLES_SOURCE_FILES = ${UPDATE_VARIABLES_H_FILE} ${UPDATE_VARIABLES_CPP_FILE}

INIT_ARGUMENT = init_argument
INIT_ARGUMENT_TARGET = ${SRC_DIR}/${INIT_ARGUMENT}.o
INIT_ARGUMENT_CPP_FILE = ${SRC_DIR}/${INIT_ARGUMENT}.cpp
INIT_ARGUMENT_H_FILE = ${INCLUDE_DIR}/${INIT_ARGUMENT}.h
INIT_ARGUMENT_SOURCE_FILES = ${INIT_ARGUMENT_H_FILE} ${INIT_ARGUMENT_CPP_FILE}

INIT_SETTING = init_setting
INIT_SETTING_TARGET = ${SRC_DIR}/${INIT_SETTING}.o
INIT_SETTING_CPP_FILE = ${SRC_DIR}/${INIT_SETTING}.cpp
INIT_SETTING_H_FILE = ${INCLUDE_DIR}/${INIT_SETTING}.h
INIT_SETTING_SOURCE_FILES = ${INIT_SETTING_H_FILE} ${INIT_SETTING_CPP_FILE}

INIT_SIGNAL = init_signal
INIT_SIGNAL_TARGET = ${SRC_DIR}/${INIT_SIGNAL}.o
INIT_SIGNAL_CPP_FILE = ${SRC_DIR}/${INIT_SIGNAL}.cpp
INIT_SIGNAL_H_FILE = ${INCLUDE_DIR}/${INIT_SIGNAL}.h
INIT_SIGNAL_SOURCE_FILES = ${INIT_SIGNAL_H_FILE} ${INIT_SIGNAL_CPP_FILE}

TARGET_FILES = 	${BASIS_TARGET} \
				${BREAK_TIES_TARGET} \
				${CC_AND_TABU_TARGET} \
				${PREPROCESS_TARGET} \
				${RECONSTRUCT_TARGET} \
				${SCORING_FUNCTION_TARGET} \
				${SET_STATES_TARGET} \
				${INIT_TARGET} \
				${SOLUTION_INIT_TARGET} \
				${SUBSET_REMOVAL_TARGET} \
				${SUBSET_ADDITION_TARGET} \
				${UPDATE_VARIABLES_TARGET} \
				${INIT_ARGUMENT_TARGET} \
				${INIT_SETTING_TARGET} \
				${INIT_SIGNAL_TARGET} \

MAIN_SOURCE_FILE = ${SRC_DIR}/main.cpp

.PHONY: clean cleanup run

CLEAN = clean
CLEANUP = cleanup

all: ${TARGET_FILES} ${TARGET}

${BASIS_TARGET}: ${BASIS_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${BASIS_CPP_FILE} -o ${BASIS_TARGET}

${BREAK_TIES_TARGET}: ${BREAK_TIES_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${BREAK_TIES_CPP_FILE} -o ${BREAK_TIES_TARGET}

${CC_AND_TABU_TARGET}: ${CC_AND_TABU_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${CC_AND_TABU_CPP_FILE} -o ${CC_AND_TABU_TARGET}

# ${INFO_TARGET}: ${INFO_SOURCE_FILES}
# 	${COMPILER} ${PRE_CFLAGS} ${INFO_CPP_FILE} -o ${INFO_TARGET}

${INIT_TARGET}: ${INIT_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${INIT_CPP_FILE} -o ${INIT_TARGET}

# ${MERSENNE_TARGET}: ${MERSENNE_SOURCE_FILES}
# 	${COMPILER} ${PRE_CFLAGS} ${MERSENNE_CPP_FILE} -o ${MERSENNE_TARGET}

# ${PARSE_ARGUMENTS_TARGET}: ${PARSE_ARGUMENTS_SOURCE_FILES}
# 	${COMPILER} ${PRE_CFLAGS} ${PARSE_ARGUMENTS_CPP_FILE} -o ${PARSE_ARGUMENTS_TARGET}

${PREPROCESS_TARGET}: ${PREPROCESS_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${PREPROCESS_CPP_FILE} -o ${PREPROCESS_TARGET}

${RECONSTRUCT_TARGET}: ${RECONSTRUCT_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${RECONSTRUCT_CPP_FILE} -o ${RECONSTRUCT_TARGET}

${SCORING_FUNCTION_TARGET}: ${SCORING_FUNCTION_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${SCORING_FUNCTION_CPP_FILE} -o ${SCORING_FUNCTION_TARGET}

${SET_STATES_TARGET}: ${SET_STATES_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${SET_STATES_CPP_FILE} -o ${SET_STATES_TARGET}

# ${SETUP_TARGET}: ${SETUP_SOURCE_FILES}
# 	${COMPILER} ${PRE_CFLAGS} ${SETUP_CPP_FILE} -o ${SETUP_TARGET}

${SOLUTION_INIT_TARGET}: ${SOLUTION_INIT_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${SOLUTION_INIT_CPP_FILE} -o ${SOLUTION_INIT_TARGET}

${SUBSET_REMOVAL_TARGET}: ${SUBSET_REMOVAL_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${SUBSET_REMOVAL_CPP_FILE} -o ${SUBSET_REMOVAL_TARGET}

${SUBSET_ADDITION_TARGET}: ${SUBSET_ADDITION_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${SUBSET_ADDITION_CPP_FILE} -o ${SUBSET_ADDITION_TARGET}

${UPDATE_VARIABLES_TARGET}: ${UPDATE_VARIABLES_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${UPDATE_VARIABLES_CPP_FILE} -o ${UPDATE_VARIABLES_TARGET}

${INIT_ARGUMENT_TARGET}: ${INIT_ARGUMENT_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${INIT_ARGUMENT_CPP_FILE} -o ${INIT_ARGUMENT_TARGET}	

${INIT_SETTING_TARGET}: ${INIT_SETTING_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${INIT_SETTING_CPP_FILE} -o ${INIT_SETTING_TARGET}	
	
${INIT_SIGNAL_TARGET}: ${INIT_SIGNAL_SOURCE_FILES}
	${COMPILER} ${PRE_CFLAGS} ${INIT_SIGNAL_CPP_FILE} -o ${INIT_SIGNAL_TARGET}			

${TARGET}: ${MAIN_SOURCE_FILE} ${TARGET_FILES}
	${COMPILER} ${CFLAGS} ${MAIN_SOURCE_FILE} ${TARGET_FILES} -o ${TARGET}

${CLEAN}:
	rm -f *~
	rm -f ${SRC_DIR}/*.o
	rm -f ${SRC_DIR}/*~

${CLEANUP}: ${CLEAN}
	rm -f ${TARGET}
